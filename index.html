<!DOCTYPE html>
<html lang="fr" data-theme="auto">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Galerie produits – 3 cartes (clair/sombre)</title>
    <meta name="description" content="Galerie de présentation de produits avec bascule de thème clair/sombre et animations fluides en HTML, CSS et JS.">
    <style>
      /* =====================
         Thème & Reset
         ===================== */
      :root{
        --bg: #0b1020;
        --surface: #121833;
        --text: #eef2ff;
        --muted: #b6c0d9;
        --primary: #7c5cff;
        --ring: rgba(124,92,255,.45);
        --card-border: rgba(255,255,255,.08);
        --shadow: 0 20px 50px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.04);
        --accent: #40c9ff;
      }
      [data-theme="light"]{
        --bg: #f6f7fb;
        --surface: #ffffff;
        --text: #0b1020;
        --muted: #495167;
        --primary: #6b5cff;
        --ring: rgba(107,92,255,.28);
        --card-border: rgba(0,0,0,.06);
        --shadow: 0 10px 30px rgba(15,23,42,.08), inset 0 0 0 1px rgba(0,0,0,.04);
        --accent: #0ea5e9;
      }

      *, *::before, *::after { box-sizing: border-box; }
      html, body { height: 100%; }
      body{
        margin:0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
        color: var(--text);
        background:
          radial-gradient(1000px 500px at 85% -10%, color-mix(in lab, var(--primary) 20%, transparent), transparent 60%),
          radial-gradient(800px 400px at -15% 115%, color-mix(in lab, var(--accent) 18%, transparent), transparent 60%),
          var(--bg);
        -webkit-font-smoothing: antialiased;
        line-height: 1.6;
        letter-spacing: .2px;
      }

      /* =====================
         Layout
         ===================== */
      header{
        display:flex; align-items:center; justify-content:space-between;
        padding: clamp(16px, 3vw, 28px);
        max-width: 1100px; margin: 0 auto;
      }
      .brand{ font-weight:800; letter-spacing:.3px; }
      .theme-toggle{
        display:inline-flex; align-items:center; gap:.5rem;
        padding:.6rem .85rem; border-radius: 12px;
        background: var(--surface);
        border: 1px solid var(--card-border);
        box-shadow: var(--shadow);
        color: var(--text);
        cursor: pointer;
        transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
      }
      .theme-toggle:hover{ transform: translateY(-1px); box-shadow: 0 16px 26px var(--ring); }
      .theme-toggle:focus-visible{ outline: 2px solid var(--primary); outline-offset: 3px; }

      main{ max-width:1100px; margin:0 auto; padding: 12px clamp(16px, 3vw, 28px) 56px; }
      .hero{
        text-align:center; margin: 18px 0 22px;
      }
      .hero h1{ margin:.2rem 0; font-size: clamp(1.6rem, 2.4vw + 1rem, 2.6rem); line-height:1.15; }
      .hero p{ margin:.25rem 0; color: var(--muted); }

      /* =====================
         Cards Grid
         ===================== */
      .grid{ display:grid; gap: clamp(16px, 2vw, 22px); grid-template-columns: repeat(3, minmax(0,1fr)); }
      @media (max-width: 900px){ .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
      @media (max-width: 640px){ .grid{ grid-template-columns: 1fr; } }

      .card{
        background: var(--surface);
        border: 1px solid var(--card-border);
        border-radius: 22px;
        overflow: clip;
        box-shadow: var(--shadow);
        transform: translateY(0) scale(1);
        opacity: 0; /* for fade-in */
        translate: 0 16px;
        transition:
          transform .35s cubic-bezier(.2,.8,.2,1),
          box-shadow .35s ease,
          translate .35s ease,
          opacity .6s ease;
      }
      .card.is-visible{ opacity: 1; translate: 0 0; }
      .card:hover{ transform: translateY(-6px) scale(1.01); box-shadow: 0 30px 60px var(--ring); }

      .media{ aspect-ratio: 16 / 10; position:relative; overflow:hidden; }
      .media img{ width:100%; height:100%; object-fit:cover; transform: scale(1); transition: transform .5s ease; display:block; }
      .card:hover .media img{ transform: scale(1.05); }

      .sheen{ position:absolute; inset:0; background: linear-gradient(110deg, transparent 30%, color-mix(in lab, var(--primary) 16%, transparent) 45%, transparent 60%);
        translate:-100% 0; transition: translate .8s ease; }
      .card:hover .sheen{ translate:0 0; }

      .content{ padding: 16px 16px 18px; }
      .title{ font-weight:700; font-size:1.05rem; margin:.2rem 0; }
      .desc{ color: var(--muted); margin: .35rem 0 .6rem; font-size:.98rem; }
      .row{ display:flex; align-items:center; justify-content:space-between; gap: 10px; }
      .price{ font-weight:800; letter-spacing:.2px; }
      .btn{
        padding: .65rem .9rem; border-radius: 12px; border: 1px solid var(--card-border);
        background: linear-gradient(180deg, color-mix(in lab, var(--primary) 18%, transparent), color-mix(in lab, var(--primary) 8%, transparent));
        color: var(--text); font-weight: 600; cursor:pointer; box-shadow: 0 10px 22px var(--ring);
        transition: transform .2s ease, box-shadow .2s ease, background .2s ease; text-decoration:none; display:inline-block;
      }
      .btn:hover{ transform: translateY(-2px); box-shadow: 0 16px 28px var(--ring); }
      .btn:focus-visible{ outline:2px solid var(--primary); outline-offset:3px; }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce){
        .card, .media img, .sheen, .btn, .theme-toggle{ transition: none !important; }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="brand">Boutique<span aria-hidden="true">·</span>Demo</div>
      <button id="toggleTheme" class="theme-toggle" aria-pressed="false" aria-label="Basculer le thème clair/sombre">
        <span id="themeLabel">Thème : Auto</span>
        <svg id="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 3a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1Zm0 15a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm8-7a1 1 0 0 1 1 1v0a1 1 0 1 1-2 0v0a1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1 1v0a1 1 0 1 1-2 0v0a1 1 0 0 1 1-1Zm11.66-6.66a1 1 0 0 1 1.41 0l.71.71a1 1 0 1 1-1.41 1.42l-.71-.71a1 1 0 0 1 0-1.42ZM6.93 17.07a1 1 0 0 1 1.41 0l.71.71a1 1 0 0 1-1.41 1.41l-.71-.71a1 1 0 0 1 0-1.41Zm10.12 1.41a1 1 0 0 1-1.41 0l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41ZM8.05 6.34a1 1 0 0 1-1.41 0l-.71-.71A1 1 0 0 1 7.34 4.22l.71.71a1 1 0 0 1 0 1.41Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
    </header>

    <main>
      <section class="hero" aria-label="Présentation des produits">
        <h1>Galerie de produits</h1>
        <p>3 cartes avec effets de survol, bascule de thème et animations en fondu.</p>
      </section>

      <section class="grid" id="gallery">
  <!-- Card 1 -->
  <article class="card" tabindex="0">
    <div class="media">
      <img
        alt="Casque sans fil noir posé sur une table"
        src="casque.png"
        loading="lazy"
      />
      <div class="sheen" aria-hidden="true"></div>
    </div>
    <div class="content">
      <h2 class="title">Casque sans fil Nova X</h2>
      <p class="desc">Réduction de bruit active, 40h d’autonomie, port USB-C.</p>
      <div class="row">
        <span class="price">129,99 €</span>
        <a href="#" class="btn" aria-label="Voir le produit Casque Nova X">Voir le produit</a>
      </div>
    </div>
  </article>

  <!-- Card 2 -->
  <article class="card" tabindex="0">
    <div class="media">
      <img
        alt="Montre connectée avec écran allumé au poignet"
        src="montre.png"
        loading="lazy"
      />
      <div class="sheen" aria-hidden="true"></div>
    </div>
    <div class="content">
      <h2 class="title">Montre Pulse S</h2>
      <p class="desc">Suivi santé 24/7, GPS, étanche 5 ATM, 2 semaines d’autonomie.</p>
      <div class="row">
        <span class="price">179,00 €</span>
        <a href="#" class="btn" aria-label="Voir le produit Montre Pulse S">Voir le produit</a>
      </div>
    </div>
  </article>

  <!-- Card 3 -->
  <article class="card" tabindex="0">
    <div class="media">
      <img
        alt="Sac à dos tech moderne posé près d’un ordinateur"
        src="sac.png"
        loading="lazy"
      />
      <div class="sheen" aria-hidden="true"></div>
    </div>
    <div class="content">
      <h2 class="title">Sac Explorer Pro</h2>
      <p class="desc">Compartiment 16&quot;, poches antivol, tissu déperlant, USB pass-through.</p>
      <div class="row">
        <span class="price">89,90 €</span>
        <a href="#" class="btn" aria-label="Voir le produit Sac Explorer Pro">Voir le produit</a>
      </div>
    </div>
  </article>
</section>

    </main>

    <script>
      // =====================
      // Thème (auto / light / dark) avec localStorage et prefers-color-scheme
      // =====================
      const root = document.documentElement;
      const btn = document.getElementById('toggleTheme');
      const label = document.getElementById('themeLabel');

      const applyTheme = (mode) => {
        if(mode === 'light'){ root.setAttribute('data-theme', 'light'); label.textContent = 'Thème : Clair'; btn.setAttribute('aria-pressed','true'); }
        else if(mode === 'dark'){ root.setAttribute('data-theme', 'dark'); label.textContent = 'Thème : Sombre'; btn.setAttribute('aria-pressed','true'); }
        else { // auto
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          root.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
          label.textContent = 'Thème : Auto'; btn.setAttribute('aria-pressed','false');
        }
      }

      const saved = localStorage.getItem('theme-mode') || 'auto';
      applyTheme(saved);

      // Cycle: auto -> light -> dark -> auto
      const nextMode = (mode) => mode === 'auto' ? 'light' : (mode === 'light' ? 'dark' : 'auto');
      btn.addEventListener('click', () => {
        const current = localStorage.getItem('theme-mode') || 'auto';
        const updated = nextMode(current);
        localStorage.setItem('theme-mode', updated);
        applyTheme(updated);
      });

      // Si l’utilisateur change les préférences système en mode auto, refléter le changement
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        const mode = localStorage.getItem('theme-mode') || 'auto';
        if(mode === 'auto') applyTheme('auto');
      });

      // =====================
      // Animation de fondu/slide-in à l’apparition (IntersectionObserver)
      // =====================
      const cards = document.querySelectorAll('.card');
      const io = new IntersectionObserver((entries) => {
        for (const entry of entries){
          if(entry.isIntersecting){ entry.target.classList.add('is-visible'); io.unobserve(entry.target); }
        }
      }, { threshold: 0.2 });
      cards.forEach(c => io.observe(c));

      // Accessibilité: entrer sur carte déclenche le focus visuel + simuler hover sur clavier
      cards.forEach(card => {
        card.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' '){
            e.preventDefault();
            const link = card.querySelector('.btn');
            if(link) link.click();
          }
        });
      });
    </script>
  </body>
</html>
